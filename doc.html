<html><head><title>libspotify for PHP documentation   </title><style type="text/css">ol{margin:0;padding:0}p{margin:0}.c5{width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c6{list-style-type:disc;margin:0;padding:0}.c3{padding-left:0pt;margin-left:36pt}.c10{color:inherit;text-decoration:inherit}.c2{font-size:14pt;font-weight:bold}.c0{height:11pt;direction:ltr}.c9{color:#000099;text-decoration:underline}.c4{font-weight:bold}.c7{font-size:18pt}.c1{direction:ltr}.c8{font-size:24pt}body{color:#000000;font-size:11pt;font-family:Arial}h1{padding-top:24pt;color:#000000;font-size:24pt;font-family:Arial;font-weight:bold;padding-bottom:6pt}h2{padding-top:18pt;color:#000000;font-size:18pt;font-family:Arial;font-weight:bold;padding-bottom:4pt}h3{padding-top:14pt;color:#000000;font-size:14pt;font-family:Arial;font-weight:bold;padding-bottom:4pt}h4{padding-top:12pt;color:#000000;font-size:12pt;font-family:Arial;font-weight:bold;padding-bottom:2pt}h5{padding-top:11pt;color:#000000;font-size:11pt;font-family:Arial;font-weight:bold;padding-bottom:2pt}h6{padding-top:10pt;color:#000000;font-size:10pt;font-family:Arial;font-weight:bold;padding-bottom:2pt}</style></head><body class="c5"><h1 class="c1"><a name="h.e31hx1-uncx82"></a><span class="c4 c8">libspotify for PHP documentation</span></h1><p class="c1"><span>by Andrew Brampton &copy;2010</span></p><p class="c0"><span></span></p><p class="c1"><span class="c4 c7">Limitation</span></p><p class="c1"><span>Due to a limitation with libspotify only one session can be created per process. This has implications on how the library is used inside PHP. If PHP is configured to use mod_php then multiple threads exist inside a single process. To avoid concurrency issues, in this situation all threads are only able to access the same libspotify session, i.e. by only logging into the same user. PHP can also be run from the command line (CLI) or as a CGI script. In these cases each PHP thread is in a seperate process allowing multiple different libspotify session to be used.</span></p><p class="c0"><span></span></p><p class="c1"><span>The code has been developed for 5.3.2-1 with minor testing on another versions.</span></p><p class="c0"><span></span></p><p class="c1"><span class="c4 c7">API</span></p><h3 class="c1"><a name="h.n63zjc-28v9zj"></a><span class="c2">Sessions</span></h3><p class="c1"><span>resource </span><span class="c4">spotify_session_login</span><span>(string username, string password, string appkey)</span></p><p class="c1"><span>Logs into spotify and returns a session resource on success, false otherwise.</span></p><p class="c0"><span></span></p><p class="c1"><span>bool </span><span class="c4">spotify_session_logout</span><span>(resource session)</span></p><p class="c1"><span class="c4">Don&rsquo;t actually use this function!</span><span>&nbsp;Logs out of spotify and returns true on success. Due to the crazy libspotify limitation this might log out other sessions in the same process. So only use this if you are in a process on your own and you know what you are doing.</span></p><p class="c0"><span></span></p><p class="c1"><span>int </span><span class="c4">spotify_session_connectionstate</span><span>(resource session)</span></p><p class="c1"><span>Returns the state the session is in. The return code can be one of the following:</span></p><ol class="c6" start="1"><li class="c3 c1"><span>SPOTIFY_CONNECTION_STATE_LOGGED_OUT</span></li><li class="c3 c1"><span>SPOTIFY_CONNECTION_STATE_LOGGED_IN</span></li><li class="c3 c1"><span>SPOTIFY_CONNECTION_STATE_DISCONNECTED</span></li><li class="c3 c1"><span>SPOTIFY_CONNECTION_STATE_UNDEFINED</span></li></ol><p class="c0"><span></span></p><p class="c1"><span>string </span><span class="c4">spotify_session_user</span><span>(resource session)</span></p><p class="c1"><span>Returns the username of the currently logged in user</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><p class="c1"><span class="c2">Error</span></p><p class="c1"><span>Error handling is simple. Most functions will return false when there is an error, and in most cases you can call spotify_last_error to figure out what happened.</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span>int </span><span class="c4">spotify_last_error</span><span>([session])</span></p><p class="c1"><span>Returns the last global error code or the last session specific one. The error code can be one of the following:</span></p><ol class="c6" start="1"><li class="c3 c1"><span>SPOTIFY_ERROR_OK</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_BAD_API_VERSION</span></li><li class="c1 c3"><span>SPOTIFY_ERROR_TRACK_NOT_PLAYABLE</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_RESOURCE_NOT_LOADED</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_BAD_APPLICATION_KEY</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_BAD_USERNAME_OR_PASSWORD</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_USER_BANNED</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_UNABLE_TO_CONTACT_SERVER</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_CLIENT_TOO_OLD</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_OTHER_PERMANENT</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_BAD_USER_AGENT</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_MISSING_CALLBACK</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_INVALID_INDATA</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_INDEX_OUT_OF_RANGE</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_USER_NEEDS_PREMIUM</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_OTHER_TRANSIENT</span></li><li class="c3 c1"><span>SPOTIFY_ERROR_IS_LOADING</span></li></ol><p class="c1"><span>Please read the </span><span class="c9"><a class="c10" href="http://www.google.com/url?q=http%3A%2F%2Fdeveloper.spotify.com%2Fen%2Flibspotify%2Fdocs%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNF3lOoZtwYhFipuV-8Z4i8Kknvijw">official libspotify documentation</a></span><span>&nbsp;for more information.</span></p><p class="c0"><span></span></p><p class="c1"><span>string </span><span class="c4">spotify_error_message</span><span>(int error)</span></p><p class="c1"><span>Returns a text string for the error code</span></p><h3 class="c1"><a name="h.aii9o-9b903p"></a><span class="c2">Playlist</span></h3><p class="c1"><span>You must have a valid session which is logged in when you use any of these functions.</span></p><p class="c0"><span></span></p><p class="c1"><span>resource </span><span class="c4">spotify_playlist_create</span><span>(resource session, string name)</span></p><p class="c1"><span>Creates a new playlist with the specified name. Returns false on error.</span></p><p class="c0"><span></span></p><p class="c1"><span>resource </span><span class="c4">spotify_playlist_load</span><span>(resource session, string link)</span></p><p class="c1"><span>Loads an existing playlist from the specified link. Returns false on error.</span></p><p class="c0"><span></span></p><p class="c1"><span>string </span><span class="c4">spotify_playlist_name</span><span>(resource playlist)</span></p><p class="c1"><span>Returns the name of the playlist</span></p><p class="c0"><span></span></p><p class="c1"><span>bool </span><span class="c4">spotify_playlist_rename</span><span>(resource playlist, string newname)</span></p><p class="c1"><span>Changes the name of the playlist. Returns true on success or false on error.</span></p><p class="c0"><span></span></p><p class="c1"><span>string </span><span class="c4">spotify_playlist_add_tracks</span><span>(resource playlist, array tracks)</span></p><p class="c1"><span>Adds the array of spotify track links to this playlist</span></p><p class="c0"><span></span></p><p class="c1"><span>string </span><span class="c4">spotify_playlist_uri</span><span>(resource playlist)</span></p><p class="c1"><span>Returns the spotify link for this playlist</span></p></body></html>